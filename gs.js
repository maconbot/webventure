var i=void 0;function m(){return function(){}}function aa(a){return function(){return a}}var p,q,ba=15,ca=24;function da(a){for(var b="",c=0;c<a.length;c++)switch(a.charCodeAt(c)){case 13:b+="<br />";break;case 63368:b+="&#224;";break;case 63374:b+="&#233;";break;default:b+=a.charAt(c)}return b}
function r(a){a=ea(a);var b=a.v&256,c=a.v&16384,d="dbox",f=!1,e=!1;a.v&32768&&(d="document");a.v&16&&(d="info");a.v&8192&&(d="alert");a.v&4096&&(f=!0);a.v&2048&&(e=!0);a=new fa(d,c,b,f,e,a.left*2,a.top*2,a.right*2-a.left,a.bottom*2-a.top);a.hide();ha(a);return a};function s(a){a[0]=="3"&&a[1]=="/"&&(a=a.substring(2));return ia(a.toLowerCase(),2)}var t=i;
function ia(a,b){t.seek(b*512+2,t.set);var c=u(t),d=v(t);(d&240)!=240&&(d&240)!=224&&fatal("Corrupt directory");t.seek(30,t.o);var f=v(t),e=v(t),g=v(t),h=1,j=0;d=a.indexOf("/");var k="";d>0&&(k=a.substring(d+1),a=a.substring(0,d));for(;j<g;){t.seek(b*512+f*h+4,t.set);d=v(t);if(d!=0){if(w(t,d&15).toLowerCase()==a){if((d&240)==208)return t.seek(16-(d&15),t.o),c=u(t),ia(k,c);t.seek(b*512+f*h+21,t.set);c=u(t);t.seek(2,t.o);f=t;k=f.data.charCodeAt(f.c++)&255;k|=(f.data.charCodeAt(f.c++)&255)<<8;k|=(f.data.charCodeAt(f.c++)&
255)<<16;k|=(f.data.charCodeAt(f.c++)&255)<<24;k&=16777215;f="";switch(d&240){case 16:f=ja(c,k);break;case 32:f=ka(c,k);break;case 48:d=c;c="";for(f=0;k>0;){t.seek(d*512+f,t.set);g=v(t);t.seek(d*512+f+256,t.set);g|=v(t)<<8;e=k;e>131072&&(e=131072);if(g)c+=ka(g,e);else for(g=0;g<e;g++)c+=String.fromCharCode(0);k-=e;f++}f=c}return new la(f)}j++}h++;h==e&&(h=0,b=c,t.seek(b*512+2,t.set),c=u(t))}return!1}function ja(a,b){t.seek(a*512,t.set);return w(t,b)}
function ka(a,b){for(var c="",d=0;b>0;){t.seek(a*512+d,t.set);var f=v(t);t.seek(a*512+d+256,t.set);f|=v(t)<<8;var e=b;e>512&&(e=512);if(f)c+=ja(f,e);else for(f=0;f<e;f++)c+=String.fromCharCode(0);b-=e;d++}return c};var x,y,ma=!0;function na(a,b,c){this.width=a>>1;this.height=b*2;this.r=c;this.z=a;this.H=b;this.data=Array(b*c)}
na.prototype.h=function(a,b,c){if(!(this.width==0||this.height==0)){var d=a.get(0).getContext("2d"),f=0,e=0;b<0&&(f=-b,b=0);c<0&&(e=-c,c=0);var g=this.width,h=this.height;g+b>=a.width()&&(g=a.width()-b);h+c>=a.height()&&(h=a.height()-c);if(!(g==0||h==0)){a=d.getImageData(b,c,g,h);for(var j=e;j<h;j++)for(var k=(j>>1)*this.r,o=(j-e)*a.width*4,l,n=f;n<g;n++)l=this.data[k+(n>>2)],y&&(l=y[l]),(l=l>>(n&2?0:4)&15)?(a.data[o++]=x[l++],a.data[o++]=x[l++],a.data[o++]=x[l++],a.data[o++]=255):o+=4;d.putImageData(a,
b,c)}}};function oa(a){z.seek(368+a*32,z.set);a=v(z);return w(z,a)}function pa(){z.seek(496,z.set);var a=v(z);return w(z,a)}function ea(a){z.seek(a*10);a={};a.top=u(z);a.left=u(z);a.bottom=u(z);a.right=u(z);a.v=u(z);return a}function qa(){z.seek(1008,z.set);var a=v(z);return da(w(z,a))}var ra=[0,80,208];function sa(a){z.seek(1128+ra[a],z.set);a=v(z);return w(z,a)}var z;function va(a){for(a={m:a,g:0};wa(a););}
function wa(a){var b=!1;if(a.m[a.g]=="."||a.m[a.g+1]==".")return!1;a.m[a.g++]==" "&&(b=!0);a.g++;for(var c="";a.m[a.g]!="\\";)c+=a.m[a.g++];a.g++;for(var d="",f=!0,e=0,g=!1;a.m[a.g]!="\r";)switch(a.m[a.g++]){case "*":d=a.m[a.g++];a.g++;break;case "B":c="<b>"+c+"</b>";break;case "C":a.g++;break;case "D":f=!1;break;case "H":e=a.m.charCodeAt(a.g++)&255;e|=(a.m.charCodeAt(a.g++)&255)<<8;break;case "I":c="<i>"+c+"</i>";break;case "N":break;case "U":break;case "V":g=!0;break;case "X":break;default:fatal("Unknown menu control code")}a.g++;
if(b)return xa(c,e,d,f),g&&xa("-",0,"",!1),!0;A={id:e};A.a=$(document.createElement("div"));c=="@"?A.a.addClass("apple"):A.a.html(c);A.a.data("refCon",A);A.a.mousedown(function(a){if(B)return!1;ya(a);return!1});A.i=$(document.createElement("table"));A.i.addClass("menu");A.body=$(document.createElement("tbody"));A.i.append(A.body);A.l=[];za.append(A.a);C.push(A);return!0};var D=2,E=24,Aa=20,Ba=4,Ca=32,Da=24,Ea=34,Fa;
function Ga(){var a=Ha(10,36,620,354);a.add(F([240,318,120,22],1,10,["OK"]));a.add(F([10,18,600,146],2,32790,["\u0001J\u0001\0Apple IIGS ^0\r\u0001J\u0001\0Written by:\r\u0001J\u0001\0\u0001S\u0001\0Fred Allen\u0001S\0\0\r\r\u0001J\u0001\0Artwork by:\r^1\r\r\u0001J\u0001\0\u0001S\u0004\0MacVenture Team\u0001S\0\0"]));a.add(F([10,164,300,136],3,32790,["^2"]));a.add(F([310,164,300,136],4,32790,["^3"]));a.add(F([10,294,600,22],5,32790,["\u0001J\u0001\0WebVenture by Sean Kasun"]));a.param([qa(),sa(0),
sa(1),sa(2)]);return a}function Ia(){var a=Ha(80,80,480,200);a.add(F([214,150,50,30],1,10,["OK"]));a.add(F([100,80,280,22],2,24,[0,0,100]));a.add(F([20,30,440,30],3,15,["Sound Volume"]));return a}
function Ja(a){var b=Ha(92,146,456,108);b.add(F([24,68,120,22],1,10,["YES"]));b.add(F([168,68,120,22],2,10,["NO"]));b.add(F([312,68,120,22],3,10,["CANCEL"]));b.add(F([100,10,340,38],4,32790,["Save changes before ^0   "]));switch(a){case 0:b.param(["starting a new game?"]);break;case 1:b.param(["opening another game?"]);break;case 2:b.param(["quitting?"])}return b}
function Ka(){var a=Ha(50,70,520,228);a.add(F([12,8,298,30],4,22,["Load which game:"]));a.add(F([12,50,298,164],3,23,[]));a.add(F([320,158,190,24],1,10,["Open"]));a.add(F([320,194,190,24],2,10,["Cancel"]));return a}function La(){var a=Ha(50,70,540,256);a.add(F([22,50,298,124],4,23,[]));a.add(F([22,182,298,30],5,22,["Save game as:"]));a.add(F([22,200,290,36],3,17,[""]));a.add(F([330,186,200,22],1,10,["Save"]));a.add(F([330,222,200,22],2,10,["Cancel"]));return a};function la(a){this.set=0;this.o=1;this.end=2;this.data=a;this.length=a.length;this.p=this.c=0}function v(a){return a.data.charCodeAt(a.c++)&255}function G(a){var b=(a.data.charCodeAt(a.c++)&255)<<8;b|=a.data.charCodeAt(a.c++)&255;return b}function u(a){var b=a.data.charCodeAt(a.c++)&255;b|=(a.data.charCodeAt(a.c++)&255)<<8;return b}function Ma(a){var b=(a.data.charCodeAt(a.c++)&255)<<16;b|=(a.data.charCodeAt(a.c++)&255)<<8;b|=a.data.charCodeAt(a.c++)&255;return b}
function Na(a){var b=(a.data.charCodeAt(a.c++)&255)<<24;b|=(a.data.charCodeAt(a.c++)&255)<<16;b|=(a.data.charCodeAt(a.c++)&255)<<8;b|=a.data.charCodeAt(a.c++)&255;return b}function Oa(a){var b=(a.data.charCodeAt(a.c)&255)<<24;b|=(a.data.charCodeAt(a.c+1)&255)<<16;b|=(a.data.charCodeAt(a.c+2)&255)<<8;b|=a.data.charCodeAt(a.c+3)&255;return b}la.prototype.seek=function(a,b){switch(b){case this.o:a+=this.c;break;case this.end:a+=this.length}this.c=a};
function w(a,b){var c=a.c;a.c+=b;return a.data.substring(c,a.c)}la.prototype.e=function(a){var b=Oa(this);b>>>=32-this.p-a;b&=(1<<a)-1;this.p+=a;this.p&16&&(this.p&=15,this.c+=2);return b};function Pa(){if(t!=i){z=s("3/RESOURCE.DAT");q.remove();delete q;var a=oa(6),b=s(a);b.seek(8,b.set);x=[];for(var c=0;c<16;c++)G(b),x.push(G(b)&255),x.push(G(b)&255),x.push(G(b)&255);a=new na(1280,200,160);for(c=0;c<32E3;c++)a.data[c]=v(b);b=new fa("plainDBox",!1,!1,!1,!1,0,0,640,400);b.hide();ha(b);H=b;H.show();Qa(H.port,0);a.h(H.port,0,0);a=[3,1,2,0,5];for(b=0;b<5;b++){c=b;var d=oa(a[b]);d=s(d);var f={ia:0,O:!1};d.seek(0,d.set);var e=d.length,g=Na(d),h=i;if(g&2147483648){g&=2147483647;f.O=!0;d.seek(g,
d.set);f.C=G(d);e=Array(16);h=Array(16);for(var j=0;j<15;j++)e[j]=G(d);for(j=0;j<16;j++)h[j]=v(d);f.Q=Array(f.C);f.P=Array(f.C);var k=0,o=i;for(j=0;j<f.C;j++){if((j&63)==0){d.seek(g+(j>>6)*6+48,d.set);var l=Ma(d);o=Ma(d);k=l&7;d.seek(g+(l>>3),d.set)}f.Q[j]=o;l=Na(d)>>>16-k&65535;d.seek(-4,d.o);var n;for(n=0;n<16;n++)if(e[n]>l)break;l=h[n];k+=l&15;k&16&&(k&=15,d.seek(2,d.o));l>>=4;n=0;l&&(n=Oa(d),l--,l==0?n=0:n>>>=32-l-k,n&=(1<<l)-1,n|=1<<l,k+=l,k&16&&(k&=15,d.seek(2,d.o)),o+=n);f.P[j]=n}h=g-4}else e-=
4,h=e,f.S=g,f.C=e/g|0;d.seek(4,d.set);f.data=w(d,h);J[c]=f}a={};z.seek(76,z.set);a.ba=u(z);a.$=u(z);a.ga=u(z);a.aa=u(z);u(z);a.ha=u(z);a.X=[];for(b=0;b<24;b++)a.X.push(v(z));a.U=[];for(b=0;b<64;b++)a.U.push(v(z));a.V=[];for(b=0;b<64;b++)a.V.push(u(z));a.W=[];for(b=0;b<64;b++)a.W.push(v(z));K=a.ba;Ra=a.$;Sa=a.aa;L=ea(5);L.top*=2;L.left*=2;L.width=L.right*2-L.left;L.height=L.bottom*2-L.top;L.ka=20;L.ja=20;L.T=0;Ta=[];Ua=[];Va=Array(K*2);if(z.length!=1676){a={};z.seek(1676,z.set);a.length=u(z);a.Z=[];
z.seek(1680,z.set);for(b=0;b<a.length;b++)a.Z.push(u(z));a.Y=[];z.seek(1868,z.set);for(b=0;b<a.length;b++)a.Y.push(v(z));a.ca=[];z.seek(1964,z.set);for(b=0;b<a.length;b++)a.ca.push(v(z))}a=[];z.seek(720,z.set);for(b=0;b<16;b++)a.push(u(z));x=[];for(b=0;b<16;b++)c=a[b]>>4&15,d=a[b]&15,x.push((a[b]>>8&15)*17),x.push(c*17),x.push(d*17);a=[];z.seek(752,z.set);for(b=0;b<256;b++)a.push(v(z));y=a;z.seek(1092,z.set);Fa=u(z);a=[];z.seek(1596,z.set);for(b=0;b<32;b++)a.push(v(z));a=[];z.seek(1636,z.set);for(b=
0;b<32;b++)a.push(v(z));Wa=r(3);Wa.n=9;Wa.addClass("commands");a=[{name:"3/SHADOWGATE",start:49390,F:-3272},{name:"3/DEJAVU",start:49390,F:-3272},{name:"3/DEJAVUII",start:4014,F:66},{name:"3/UNINVITED",start:49390,F:-3272}];for(b=0;b<a.length;b++)if(c=s(a[b].name)){for(d=0;d<9;d++)c.seek(a[b].start+d*11,c.set),f=u(c)*2,g=u(c)*2,e=u(c)*2-f,h=u(c)*2-g,j=v(c),k=u(c),k=k&15|k&61440,c.seek(a[b].start+115+d*4,c.set),n=u(c),c.seek(n+a[b].F),o=u(c),l=w(c,o*e),c.seek(a[b].start+151+d*4,c.set),n=u(c),c.seek(n+
a[b].F),u(c),n=w(c,o*e),Wa.add(F([g,f,h,e],j,k,[o,l,n]));break}Xa=r(0);Xa.n=10;M=r(1);M.n=11;N=$(document.createElement("div"));N.addClass("textEdit");a=M;b=N;c=a.port.width();d=a.port.height();a.port.remove();b.css("top","0px");b.css("left","0px");b.css("width",c+"px");b.css("height",d+"px");a.port=b;a.d.append(b);O=r(4);O.n=12;O.b={id:0,x:0,y:0,children:[{id:1,top:0,left:0,width:0,height:0}]};Ya=r(2);P(Ya,"Exits");Ya.n=13;Ya.addClass("exits");a=[">L File \\H\u0002\0\r LNew\\V*NnH\u0001\u0001\r LOpen...\\*OoH\u0002\u0001\r LSave\\*SsH\u0003\u0001\r LSave As...\\VH\u0004\u0001\r LQuit\\*QqH\u0005\u0001\r.",
">L Edit \\H\u0003\0\r LUndo\\DV*ZzH\u00fa\0\r LCut\\D*XxH\u00fb\0\r LCopy\\D*CcH\u00fc\0\r LPaste\\DV*VvH\u00fd\0\r LClear\\DH\u00fe\0\r.",">L Special \\H\u0004\0\r LClean Up\\DH\u0006\u0001\r LMess Up\\DH\u0007\u0001\r."];z.seek(1024);b=w(z,48);va(b);for(b=0;b<a.length;b++)va(a[b]);A=C[0];xa("Adjust Volume...",2304,"",!0);P(M,"Untitled");if(gameparts.length>1)Q=gameparts[1],a=window.JSON.parse(window.localStorage.getItem(Q).toString()),R=a.M,S=a.N,N.html(a.text),P(M,Q);else{a=s(pa());R=Array(Sa);
S=Array(Ra);for(b=0;b<Sa;b++){R[b]=Array(K);for(c=0;c<K;c++)R[b][c]=G(a)}for(b=0;b<Ra;b++)S[b]=G(a)}Za();Q==""&&Ta.push(T());setTimeout($a,500)}else setTimeout(Pa,10)}function Za(){for(var a,b,c=0;c<K*2;c++)Va[c]=0;for(c=K-1;c;c--)a=R[0][c],(b=Va[a*2])&&(Va[c*2+1]=b),Va[a*2]=c}
function ab(){for(var a=[],b=0;b<U.length;b++)(U[b].n==10||U[b].n==14)&&a.push(U[b]);for(b in a){var c=a[b];if(c!=i)if(c.n==10)c.b={},P(c,"");else{var d={L:c.port.height(),K:c.port.width()};bb(c,{L:0,K:0});bb(c,d);c.b={};V(c)}}L.T=0}var Va;
function $a(){V(H);delete H;desktop.append(za);Wa.show();O.show();var a=O;if(a!=i&&a.b!=i&&(a==O||T()==1)){a==Xa?cb(a.b.id*2).h(Xa.port,0,0):Qa(a.port,Fa);for(var b=0;b<a.b.children.length;b++){var c;var d=a.b.children[b].id;c=a;var f=T(),e=T(),g=T();if(!g||!T()){var h=1;g?h=0:Ua.indexOf(d)!=-1&&(h=2);g=i;f-=c.b.x;g=e-c.b.y;var j=c.port,k=h;h={top:0,left:0,width:0,height:0};e=i;if(e=cb(d*2))switch(h={top:g,left:f,width:e.width,height:e.height},k){case 1:e.h(j,f,g);break;case 2:if(d=f,f=g,!(e.width==
0||e.height==0)){g=j.get(0).getContext("2d");var o=k=0;d<0&&(k=-d,d=0);f<0&&(o=-f,f=0);var l=e.width,n=e.height;l+d>=j.width()&&(l=j.width()-d);n+f>=j.height()&&(n=j.height()-f);if(!(l==0||n==0)){j=g.getImageData(d,f,l,n);for(var ta=o;ta<n;ta++)for(var Ab=(ta>>1)*e.r,ga=(ta-o)*j.width*4,I,ua=k;ua<l;ua++)I=e.data[Ab+(ua>>2)],y&&(I=y[I]),(I=I>>(ua&2?0:4)&15)?(I^=15,j.data[ga++]=x[I++],j.data[ga++]=x[I++],j.data[ga++]=x[I++],j.data[ga++]=255):ga+=4;g.putImageData(j,d,f)}}}g=h;g.top+=c.b.y;g.left+=c.b.x;
c=g}else c={top:0,left:0,width:0,height:0};a.b.children[b].top=c.top;a.b.children[b].left=c.left;a.b.children[b].width=c.width;a.b.children[b].height=c.height}if(a.n==14&&a.b.da){b={top:0,left:0,right:0,bottom:0};a.b.da=!1;for(c=0;c<a.b.children.length;c++)h=a.b.children[c],b.right==b.left||b.bottom==b.top?(b.top=h.top,b.left=h.left,b.bottom=h.top+h.height,b.right=h.left+h.width):(b.top=Math.min(b.top,h.top),b.left=Math.min(b.left,h.left),b.bottom=Math.max(b.bottom,h.top+h.height),b.right=Math.max(b.right,
h.left+h.width));if(b.right==b.left||b.bottom==b.top)b.top=a.b.y,b.left=a.b.x,b.bottom=a.b.y,b.right=a.b.x;else{if(b.left>a.b.x)b.left=a.b.x;if(b.right<a.b.x)b.right=a.b.x;if(b.top>a.b.y)b.top=a.b.y;if(b.bottom<a.b.y)b.bottom=a.b.y}if(a.n==11)a.f.data("min",b.top),a.f.data("max",b.bottom),e=a.port.scrollTop(),b=a.f.data("min"),c=a.f.data("max"),b<c?(h=e-b,e+=a.port.height(),h=h*(a.height-48-E-24)/(c-b)|0,b=e*(a.height-48-E-24)/(c-b)|0,a.f.css("top",h+22+"px"),a.f.css("height",b-h+"px")):(a.f.css("top",
"22px"),a.f.css("height",a.height-48-E-24+"px"));else{if(b.left>a.b.x)b.left=a.b.x;if(b.right<a.b.x+a.port.width())b.right=a.b.x+a.port.width();if(b.top>a.b.y)b.top=a.b.y;if(b.bottom<a.b.y+a.port.height())b.bottom=a.b.y+a.port.height();a.A&&(a.j.data("min",b.left),a.j.data("max",b.right));a.B&&(a.f.data("min",b.top),a.f.data("max",b.bottom));a.A&&(b=a.j.data("min"),c=a.j.data("max"),b<c?(e=a.b.x-b,h=a.port.width(),e=e*(a.port.width()-68)/(c-b)|0,b=h*(a.port.width()-68)/(c-b)|0,b>a.port.width()-68-
e&&(b=a.port.width()-68-e),a.j.css("left",e+32+"px"),a.j.css("width",b+"px")):(a.j.css("left","32px"),a.j.css("width",a.port.width()-68+"px")));a.B&&(b=a.f.data("min"),c=a.f.data("max"),b<c?(e=a.b.y-b,h=a.port.height(),e=e*(a.port.height()-48)/(c-b)|0,b=h*(a.port.height()-48)/(c-b)|0,b>a.port.height()-48-e&&(b=a.port.height()-48-e),a.f.css("top",e+22+"px"),a.f.css("height",b+"px")):(a.f.css("top","22px"),a.f.css("height",a.port.height()-48+"px")))}}}Ya.show();M.show();Xa.show();db=N.get(0).scrollHeight;
N.scrollTop(db-db%ba);T();fatal("set");W=!1;eb()};var W=!1,db=0,Ua,Ta,H,Xa,Wa,M,O,Ya,N,K,Ra,Sa,L,R,S,Q="";function X(){}var B=!1;function eb(){fatal("runmain")}function T(){fatal("get");return 0}function fb(a){switch(a){case 256:gb();break;case 257:hb();break;case 258:ib();break;case 259:X=m();jb();break;case 260:X=m();kb();break;case 261:lb();break;case 2304:mb();break;default:fatal("Unknown menuitem: "+a.toString(16))}}function gb(){var a=Ga();B=!0;a.show(function(){V(a);B=!1})}
function mb(){var a=Ia(),b=nb();b==null&&(b=50);ob(a.getItem(2),b);B=!0;a.show(function(){var b=a.getItem(2).value,d=new Date;d.setTime(d.getTime()+31536E6);document.cookie="webventure_volume="+escape(b)+"; expires="+d.toGMTString()+"; path=/";V(a);B=!1})}function hb(){if(W){var a=Ja(0);B=!0;a.show(function(b){V(a);switch(b){case 1:X=hb;jb();break;case 2:pb();break;case 3:B=!1}})}else pb()}
function pb(){Q="";for(var a=s(pa()),b=0;b<Sa;b++)for(var c=0;c<K;c++)R[b][c]=G(a);for(b=0;b<Ra;b++)S[b]=G(a);ab();Za();P(M,"Untitled");N.html("");Ta=[T()];T();fatal("set");W=!1;eb()}function ib(){if(W){var a=Ja(1);B=!0;a.show(function(b){V(a);switch(b){case 1:X=ib;jb();break;case 2:qb();break;case 3:B=!1}})}else qb()}
function qb(){var a=Ka();B=!0;for(var b=a.getItem(3),c=i,d=0;d<window.localStorage.length;d++){var f=window.localStorage.key(d);if(f!=null&&window.JSON.parse(window.localStorage.getItem(f).toString()).R==gamename){var e=$(document.createElement("div"));e.addClass("listitem");e.mousedown(aa(!1));e.click(function(a){c&&c.removeClass("active");c=$(a.target);c.addClass("active")});e.dblclick(function(){a.getItem(1).a.click()});e.text(f.toString());b.a.append(e)}}a.show(function(b){switch(b){case 1:if(c==
i)break;Q=c.text();V(a);B=!1;b=window.JSON.parse(window.localStorage.getItem(Q).toString());R=b.M;S=b.N;ab();Za();P(M,Q);N.html(b.text);db=N.get(0).scrollHeight;N.scrollTop(db);Ta=[];T();fatal("set");W=!1;eb();break;case 2:V(a),B=!1}})}function jb(){Q==""?kb():(window.localStorage.setItem(Q,window.JSON.stringify({R:gamename,M:R,N:S,text:N.html()})),P(M,Q),W=!1,X())}
function kb(){var a=La();B=!0;var b=a.getItem(3);b.a.focus();b.a.keypress(function(b){if(b.which==13)return a.getItem(1).a.click(),!1;return!0});b=a.getItem(4);for(var c=i,d=0;d<window.localStorage.length;d++){var f=window.localStorage.key(d);if(f!=null&&window.JSON.parse(window.localStorage.getItem(f).toString()).R==gamename){var e=$(document.createElement("div"));e.addClass("listitem");e.mousedown(aa(!1));e.click(function(b){c&&c.removeClass("active");c=$(b.target);c.addClass("active");a.getItem(3).a.val(c.text())});
e.dblclick(function(){a.getItem(1).a.click()});e.text(f.toString());b.a.append(e)}}a.show(function(b){switch(b){case 1:Q=a.getItem(3).a.val();V(a);B=!1;jb();break;case 2:V(a),B=!1,X()}})}function lb(){if(W){var a=Ja(2);B=!0;a.show(function(b){V(a);switch(b){case 1:X=lb;jb();break;case 2:eb();break;case 3:B=!1}})}else eb()}
function nb(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){for(var c=a[b];c.charAt(0)==" ";)c=c.substring(1,c.length);if(c.indexOf("webventure_volume=")==0)return unescape(c.substring(18,c.length))}return null};function cb(a){var b;a>=J[3].C?b="":(J[3].O?(b=J[3].P[a],a=J[3].Q[a]):(b=J[3].S,a*=b),b=b?J[3].data.substring(a,a+b):"");if(!(b.length<2)){if(b.length==2)return cb((b.charCodeAt(0)&255)<<8|b.charCodeAt(1)&255);var c;b=new la(b);a=b.e(3);var d,f;ma&&b.e(2);f=b.e(1)?b.e(10):b.e(6);if((d=b.e(1)?b.e(10):b.e(6))&&f)switch(c=new na(d,f,d+15>>3&65534),a){case 0:a=c.z>>4;d=c.z&15;for(var e=0,g=0;g<c.H;g++){for(var h=0;h<a;h++)f=Oa(b),b.seek(2,b.o),f>>>=16-b.p,c.data[e++]=f>>8&255,c.data[e++]=f&255;d&&(f=
b.e(d),f<<=16-d,c.data[e++]=f>>8&255,c.data[e++]=f&255)}break;case 1:rb(sb,tb,ub,c,b);break;case 2:rb(vb,wb,xb,c,b);break;case 3:a=Array(17);for(e=0;(d=yb[e++])!=255;){for(f=b.e(d);(d=yb[e++])!=255;)a[yb[e++]]=f%d,f=f/d|0;a[yb[e++]]=f}a[16]=0;for(f=16;f>0;f--)for(d=f;d<=16;d++)a[d]>=a[f-1]&&a[d]++;for(f=16;f>=0;f--)if(a[f]==16){a[f]=255;break}e=Array(17);g=Array(17);d=b.e(2)+1;for(f=h=0;f<15;f++){if(f)for(;!b.e(1);)d++;g[f]=d;e[f]=h;h+=1<<16-d}for(e[15]=h;h&1<<16-d;)d++;e[16]=h|1<<16-d;g[15]=d;g[16]=
d;rb(e,g,a,c,b)}return c}}function Qa(a,b){for(var c=a.width(),d=a.height(),f=a.get(0).getContext("2d"),e=f.getImageData(0,0,c,d),g=0;g<d;g++)for(var h=g*e.width*4,j=0;j<c;j++){var k=(b>>4*(j&3)&15)*3;e.data[h++]=x[k++];e.data[h++]=x[k++];e.data[h++]=x[k++];e.data[h++]=255}f.putImageData(e,0,0)}
var sb=[0,8192,16384,20480,24576,28672,32768,36864,40960,45056,49152,53248,55296,57344,59392,61440,63488],tb=[3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5],ub=[0,15,3,5,6,7,8,9,10,12,255,1,2,4,11,13,14],vb=[0,16384,32768,49152,51200,53248,55296,57344,59392,61440,62464,62976,63488,64E3,64512,65024,65280],wb=[2,2,2,5,5,5,5,5,5,6,7,7,7,7,7,8,8],xb=[255,0,15,1,3,7,14,12,8,6,2,4,9,13,11,10,5],yb=[8,15,2,255,0,4,255,1,7,9,8,255,3,4,255,4,10,7,10,11,6,255,5,6,6,11,255,7,3,255,9,4,3,14,255,12,2,255,13,1,255,15,255];
function rb(a,b,c,d,f){var e;Y=Z=0;e=d.z&3?f.e(5):f.e(4)<<1;var g=0,h=d.z&15;h&&(h>>=2,g=h&1,h=2-(h>>1));for(var j=0,k=0;k<d.H;k++){for(var o=0;o<d.z>>3;o++){var l=zb(a,b,c,f)<<4;d.data[j++]=zb(a,b,c,f)|l}g&&(d.data[j]=zb(a,b,c,f)<<4);j+=h}if(o=d.z&3){j=d.r-h;var n=0;for(k=h=0;k<d.H;k++)e&1?(n<o&&(l=zb(a,b,c,f)<<4,h|=l>>>n,n+=4),n-=o,l=h,h<<=o,h&=255):(l=f.e(o),l<<=8-o),g&&(l>>>=4),d.data[j]|=l&255,j+=d.r}if(e&8)for(k=j=0;k<d.H;k++)if(l=0,e&2)for(o=0;o<d.r;o++)d.data[j]^=l,l=d.data[j++];else for(o=
0;o<d.r;o++)h=d.data[j]^l,h^=h>>>4&15,d.data[j++]=h,l=h<<4&255;if(e&4){a=d.r*4;e&2&&(a*=2);j=0;e=a;for(b=0;b<d.H*d.r-a;b++)d.data[e++]^=d.data[j++]}}var Z=0,Y=0;
function zb(a,b,c,d){if(Z)return Z--,Y=Y<<8&65280|Y>>8,Y&255;var f=Oa(d);f>>>=16-d.p;f&=65535;var e;for(e=0;e<16;e++)if(a[e+1]>f)break;d.p+=b[e];d.p&16&&(d.p&=15,d.seek(2,d.o));a=c[e];if(a==255)return d.e(1)||(Y&=255,Y|=Y<<8),Z=d.e(3),Z<3&&(Z<<=4,Z|=d.e(4),Z<8&&(Z<<=8,Z|=d.e(8))),Z-=2,Y=Y<<8&65280|Y>>8,Y&255;else Y<<=8,Y|=a,Y&=65535;return a};function xa(a,b,c,d){var f={id:b},e=$(document.createElement("tr"));if(a[0]=="-"){var g=$(document.createElement("td"));g.attr("colspan","2");g.addClass("divider");g.append(document.createElement("hr"))}else e.addClass("menuitem"),g=$(document.createElement("td")),g.html(da(a)),e.append(g),g=$(document.createElement("td")),c!=""&&(g.addClass("shortcut"),Bb.push({key:c,id:b}),g.text(c));e.append(g);f.a=e;f.enabled=d;f.enabled||f.a.addClass("disabled");A.body.append(f.a);A.l.push(f)}
function ya(a){for(var b=$(a.target);b.data("refCon")==i;)b=b.parent();b.addClass("active");var c=b.data("refCon");desktop.append(c.i);a=b.position();c.i.css("top",a.top+ca+"px");c.i.css("left",a.left+"px");var d=-1;$(document).mousemove(function(a){var e=za.offset();if(a.pageX>=e.left&&a.pageY>e.top&&a.pageX<e.left+za.width()&&a.pageY<e.top+za.height())for(var g=0;g<C.length;g++){if(e=C[g].a.offset(),a.pageX>=e.left&&a.pageX<e.left+C[g].a.outerWidth()){c.i.remove();b.removeClass("active");b=C[g].a;
b.addClass("active");c=b.data("refCon");desktop.append(c.i);e=b.position();c.i.css("top",e.top+ca+"px");c.i.css("left",e.left+"px");break}}else if(e=c.i.offset(),a.pageX>=e.left&&a.pageY>=e.top&&a.pageX<e.left+c.i.outerWidth()&&a.pageY<e.top+c.i.outerHeight())for(g=0;g<c.l.length;g++){var h=c.l[g].a;h.hasClass("menuitem")&&c.l[g].enabled&&(e=h.offset(),a.pageY>=e.top&&a.pageY<e.top+h.outerHeight()?(d=g,h.addClass("active")):h.removeClass("active"))}else{for(g=0;g<c.l.length;g++)c.l[g].a.removeClass("active");
d=-1}});$(document).mouseup(function(){$(document).unbind("mousemove");$(document).unbind("mouseup");c.i.remove();b.removeClass("active");d!=-1&&fb(c.l[d].id)})}var za,C=[],Bb=[],A=i;$("body").keydown(function(a){if(a.target.type=="text")return!1;if(!a.altKey)return!1;if(B)return!1;for(var b=0;b<Bb.length;b++)if(Bb[b].key.charCodeAt(0)==a.which)for(var c=Bb[b].id,d=0;d<C.length;d++)for(var f=0;f<C[d].l.length;f++)C[d].l[f].id==c&&C[d].l[f].enabled&&Cb(C[d],c)});
function Cb(a,b){a.a.addClass("active");setTimeout(function(){a.a.removeClass("active");fb(b)},200)};function fa(a,b,c,d,f,e,g,h,j){this.w=[];this.zoom=c;this.close=b;this.B=d;this.A=f;this.d=$(document.createElement("div"));this.d.addClass(a);if(a=="document"||a=="info")b="<span></span>",this.title=$(document.createElement("div")),this.title.addClass("title"),this.title.mousedown(function(a){B||fatal(a);return!1}),this.close&&(b='<div class="close"></div>'+b),this.zoom&&(b+='<div class="resize"></div>'),this.title.html(b),this.close&&(b=this.title.children("div.close"),b.mousedown(aa(!1)),b.click(function(a){B||
fatal(a);return!1})),this.zoom&&(b=this.title.children("div.resize"),b.mousedown(aa(!1)),b.click(function(a){B||fatal(a);return!1})),this.d.append(this.title);this.port=$(document.createElement("canvas"));this.port.mousedown(function(a){B||fatal(a);return!1});this.port.attr("width",h);this.port.attr("height",j);this.d.append(this.port);this.top=g;this.height=j;this.left=e;this.width=h;a=="document"?(this.top-=E+D,this.height+=E,this.left-=D):a=="info"?(this.top-=Aa+D,this.height+=Aa,this.left-=D):
a=="alert"?(this.top-=Ba*2,this.left-=Ba*2,this.width+=Ba,this.height+=Ba):(this.top-=D,this.left-=D);this.B&&(this.width+=Ca);this.A&&(this.height+=Da);this.d.css("top",this.top+"px");this.d.css("left",this.left+"px");this.d.css("width",this.width+"px");this.d.css("height",this.height+"px");desktop.append(this.d);(this.B||this.A)&&Db(this)}p=fa.prototype;p.show=function(){this.d.show();for(var a=0;a<this.w.length;a++)this.w[a].q!=255&&this.w[a].show()};p.hide=function(){this.d.hide()};
function P(a,b){if(a.title!=i){var c=a.title.children("span");c.html("");if(b=="")c.hide();else{var d=a.d.css("display")=="none";a.d.show();c.css({position:"absolute",visibility:"hidden",display:"block"});var f=a.port.width();a.close&&(f-=30);a.zoom&&(f-=30);for(var e=0;e<b.length;e++)if(c.append(b.substring(e,e+1)),c.width()>f){c.html(b.substring(0,e-1));break}c.css({position:"",visibility:"",display:""});d&&a.d.hide()}}}p.addClass=function(a){this.d.addClass(a)};p.removeClass=function(a){this.d.removeClass(a)};
p.add=function(a){var b=this.port.position().top,c=parseInt(a.a.css("top"),10);a.a.css("top",c+b+"px");this.d.append(a.a);a.d=this;this.w.push(a);this.d.css("display")!="none"&&a.h()};p.remove=function(a){var b=this.w.indexOf(a);b!=-1&&this.w.splice(b,1);a.a.remove()};p.close=function(){this.d.remove()};function bb(a,b){var c=a.port.offset();b.K+=c.left+1;b.L+=c.top+2;a.b&&(b.K-=a.b.x,b.L-=a.b.y)}
function Db(a){if(a.A){a.s=$(document.createElement("div"));a.s.addClass("hscroll");a.s.css("top",a.height-Da+"px");a.s.css("width",a.width-68+"px");a.s.mousedown(function(){fatal("scroll")});var b=$(document.createElement("div"));b.addClass("leftarrow");b.mousedown(function(){fatal("scroll")});a.s.append(b);a.k=$(document.createElement("div"));a.k.addClass("rightarrow");a.k.css("left",a.width-Ea-32+"px");a.k.mousedown(function(){fatal("scroll")});a.s.append(a.k);a.j=$(document.createElement("div"));
a.j.addClass("slider");a.j.mousedown(function(){fatal("drag")});a.s.append(a.j);a.d.append(a.s)}if(a.B)a.t=$(document.createElement("div")),a.t.addClass("vscroll"),a.t.css("left",a.width-Ca+"px"),a.t.css("height",a.height-48+"px"),a.t.mousedown(function(){fatal("scroll")}),b=$(document.createElement("div")),b.addClass("uparrow"),b.mousedown(function(){fatal("scroll")}),a.t.append(b),a.I=$(document.createElement("div")),a.I.addClass("downarrow"),a.I.css("top",a.height-24-24-E+"px"),a.I.mousedown(function(){fatal("scroll")}),
a.t.append(a.I),a.f=$(document.createElement("div")),a.f.addClass("slider"),a.f.mousedown(function(){fatal("drag")}),a.t.append(a.f),a.d.append(a.t);a.G=$(document.createElement("div"));a.G.addClass("grow");a.G.css("top",a.height-24+"px");a.G.css("left",a.width-32+"px");a.G.mousedown(function(){fatal("grow")});a.d.append(a.G)}function V(a){for(var b=0;b<U.length;b++)if(U[b]==a){a.close();U.splice(b,1);break}U.length&&ha(U[0])}
function ha(a){if(U[0]!=a){U[0]!=i&&U[0].a.removeClass("active");for(var b=0;b<U.length;b++)U[b]==a&&U.splice(b,1);U.unshift(a)}a.a.addClass("active")}function Ha(a,b,c,d){a=new fa("alert",!1,!1,!1,!1,a,b,c,d);a.n=2;a.hide();ha(a);return a}var U=[];function F(a,b,c,d){switch(c&255){case 2:return new Eb(a,b,d);case 10:return new Fb(a,b,d);case 15:return new Gb(a,b,d);case 17:return new Hb(a,b,d);case 22:return new Ib(a,b,d);case 23:return new Jb(a,b);case 24:return new Kb(a,b,d);case 25:return new Lb(a,b,d);default:fatal("Unknown control:"+c.toString(16))}}
function Eb(a,b,c){this.a=$(document.createElement("canvas"));this.a.addClass("cbutton");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.attr("width",a[2]);this.a.attr("height",a[3]);this.q=b;this.selected=!1;this.ea=c[0];this.e=c[1];this.fa=c[2];this.a.mousedown(function(){fatal("cbutton")})}
Eb.prototype.h=function(){var a=this.a.get(0).getContext("2d"),b=a.getImageData(0,0,this.width,this.height),c=this.selected?this.fa:this.e;if(c)for(var d=0;d<this.height;d++)for(var f=(d>>1)*this.ea,e=d*b.width*4,g,h=0;h<this.width;h++)g=c.charCodeAt(f+(h>>2)),g=(g>>(h&2?0:4)&15)*3,b.data[e++]=x[g++],b.data[e++]=x[g++],b.data[e++]=x[g++],b.data[e++]=255;else for(d=0;d<this.height;d++){e=d*b.width*4;for(h=0;h<this.width;h++){g=this.selected?0:255;if(d<2||h<4||d>this.height-3||h>this.width-5)g=0;b.data[e++]=
g;b.data[e++]=g;b.data[e++]=g;b.data[e++]=255}}a.putImageData(b,0,0)};function Fb(a,b,c){this.a=$(document.createElement("div"));this.a.addClass("button");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]+"px");this.a.css("height",a[3]+"px");this.a.html(c[0]);this.q=b;this.a.mousedown(function(){fatal("button")})}Fb.prototype.h=m();
function Gb(a,b,c){this.a=$(document.createElement("div"));this.a.addClass("textblock");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]+"px");this.a.css("height",a[3]+"px");this.q=b;this.J(c[0])}Gb.prototype.J=function(a){this.a.html(a)};Gb.prototype.h=m();
function Hb(a,b,c){this.a=$(document.createElement("input"));this.a.addClass("textinput");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]+"px");this.a.css("height",a[3]+"px");this.a.val(c[0]);this.q=b}Hb.prototype.h=m();function Ib(a,b,c){this.a=$(document.createElement("div"));this.a.addClass("textblock");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]+"px");this.a.css("height",a[3]+"px");this.q=b;this.J(c[0])}Ib.prototype.h=m();
Ib.prototype.J=function(a){for(var b="",c=0;c<a.length;c++)a.charCodeAt(c)==1?(a.charCodeAt(c+1)==74&&this.a.css("text-align","center"),c+=2):b+=a.charCodeAt(c)==13?"<br />":a.charAt(c);this.a.html(b)};function Jb(a,b){this.a=$(document.createElement("div"));this.a.addClass("list");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]+"px");this.a.css("height",a[3]+"px");this.q=b}Jb.prototype.h=m();
function Kb(a,b,c){this.value=parseInt(c[0],10);this.q=b;this.min=parseInt(c[1],10);this.max=parseInt(c[2],10);this.width=a[2];this.a=$(document.createElement("div"));this.a.addClass("hscroll");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]+"px");this.a.css("height",a[3]+"px");this.a.mousedown(function(){fatal("mousedown")});this.D=$(document.createElement("div"));this.D.addClass("leftarrow");this.D.css("top","0px");this.D.css("left","0px");this.D.mousedown(function(){fatal("left")});
this.a.append(this.D);this.k=$(document.createElement("div"));this.k.addClass("rightarrow");this.k.css("top","0px");this.k.css("left",a[2]-Ea+"px");this.k.mousedown(function(){fatal("right")});this.a.append(this.k);this.u=$(document.createElement("div"));this.u.addClass("slider");this.u.css("top","0px");this.u.css("left","50px");this.u.css("width","20px");this.u.mousedown(function(){fatal("slider")});this.a.append(this.u)}
Kb.prototype.h=function(){this.u.css("left",(this.value*(this.width-88)/(this.max-this.min)|0)+32+"px")};function ob(a,b){a.value=b;a.h()}function Lb(a,b,c){this.a=$(document.createElement("div"));this.a.addClass("sbutton");this.a.css("left",a[0]+"px");this.a.css("top",a[1]+"px");this.a.css("width",a[2]-2+"px");this.a.css("height",a[3]-2+"px");this.a.html(c[0]);this.q=b;this.a.mousedown(function(){fatal("button")})}Lb.prototype.h=m();var J=[];var Mb=document.createElement("link");Mb.type="text/css";Mb.rel="stylesheet";Mb.href="gs.css";$("head").append(Mb);q=$(document.createElement("img"));q.attr("src","images/gs/start.png");q.css("width","100%");q.css("height","100%");desktop.append(q);setTimeout(Pa,10);
